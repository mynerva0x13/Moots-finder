<header class="bg-slate-400 h-72 flex flex-col items-center justify-center text-center text-white">
    <div class="">
        <h1 class="text-8xl font-bold animate-fade-right animate-once animate-duration-[500ms] animate-ease-in">Moots Finder</h1>
        <p class="text-lg mt-4 animate-fade-left animate-once animate-duration-[700ms] animate-ease-in">Bluesky Client for finding your moots</p>
    </div>
</header>

<main class="flex justify-center items-center py-12">
  <div class="bg-white shadow-lg rounded-lg p-8 w-full max-w-md">
      <h2 class="text-2xl font-semibold text-center mb-6">Login to Bluesky</h2>
      <form class="space-y-4" id="loginForm">
          <!-- Username Field -->
          <div>
              <label for="username" class="block text-sm font-medium text-gray-700 mb-1">Username</label>
              <input 
                  type="text" 
                  id="username" 
                  name="username" 
                  autocomplete="username" 
                  class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500"
                  placeholder="Enter your username"
                  required>
          </div>
          <!-- Password Field -->
          <div>
              <label for="password" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
              <input 
                  type="password" 
                  id="password" 
                  name="password" 
                  autocomplete="password" 
                  class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500"
                  placeholder="Enter your password"
                  required>
          </div>
          <!-- Login Button -->
          <div>
              <button 
                  type="submit" 
                  class="w-full bg-sky-600 text-white font-medium py-2 rounded-lg hover:bg-sky-700 transition">
                  Login
              </button>
          </div>
      </form>
      <!-- Additional Links -->
      <p class="text-sm text-gray-600 mt-4 text-center">
          Don't have an account? <a href="https://bsky.app/" class="text-sky-500 hover:underline">Sign up</a>
      </p>
  </div>
</main>
<script>
  // Add event listener to the form
  document.getElementById('loginForm').addEventListener('submit', async function(event) {
      event.preventDefault(); // Prevent form from refreshing the page
      
      // Get form data
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      
      try {
          // Send POST request with Axios
          const response = await axios.post('/login', {
              username: username,
              password: password
          });

          // Handle success
          console.log('Login Successful:', response.data);
          localStorage.setItem("data",JSON.stringify(response.data.log))
          alert('Login Successful');
      } catch (error) {
          // Handle error
          console.error('Login Failed:', error.response?.data || error.message);
          alert('Login Failed. Please check your credentials.');
      }
  });
</script>